{
  "openapi": "3.0.3",
  "x-stoplight": {
    "id": "snkgxctdxuqc9"
  },
  "info": {
    "title": "API des nouvelles acquisitions",
    "version": "4.0.0",
    "description": "API REST pour les nouvelles acquisitions des Bibliothèques de l'Université de Montréal",
    "contact": {
      "name": "Christian Rémillard",
      "url": "https://github.com/bibudem/api-acquisitions",
      "email": "christian.remillard@umontreal.ca"
    },
    "license": {
      "name": "MIT",
      "url": "https://raw.githubusercontent.com/bibudem/api-acquisitions/main/LICENSE"
    }
  },
  "paths": {
    "/": {
      "get": {
        "parameters": [
          {
            "$ref": "#/components/parameters/limite"
          },
          {
            "$ref": "#/components/parameters/disciplines"
          },
          {
            "$ref": "#/components/parameters/periode"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/acquisitionsList"
                    },
                    {
                      "$ref": "#/components/schemas/RSSType"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/RequestValidationError"
          },
          "500": {
            "$ref": "#/components/responses/InternalErrorResponse"
          }
        },
        "operationId": "getNacq",
        "summary": "Get all",
        "description": "Recherche des nouvelles acquisitions en filtrant par limite, discipline ou période.\n",
        "x-internal": true
      }
    },
    "/about": {
      "get": {
        "responses": {
          "200": {
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "examples": {
                  "Example 1": {
                    "value": "api-acquisitions v4.0.0 (development)"
                  }
                }
              }
            },
            "description": "Ok"
          }
        },
        "operationId": "getAbout",
        "description": "Affiche le nom, la version et l'environnement d'exécution de l'API",
        "summary": "About"
      }
    },
    "/discipline/{discipline}.{format}": {
      "summary": "Liste les nouvelles acquisitions pour une discipline",
      "get": {
        "parameters": [
          {
            "$ref": "#/components/parameters/limite"
          },
          {
            "$ref": "#/components/parameters/periode"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/AcquisitionsListRSSResponse"
          },
          "400": {
            "$ref": "#/components/responses/RequestValidationError"
          },
          "500": {
            "$ref": "#/components/responses/InternalErrorResponse"
          }
        },
        "summary": "Get RSS feed by discipline",
        "description": "**[OBSOLÈTE] Utilisez plutôt `/disciplines/{discipline}.{format}`**\n\nRetourne une liste d'acquisitions pour une discipline donnée.",
        "operationId": "getByDisciplineOldRSS",
        "deprecated": true
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/discipline"
        },
        {
          "schema": {
            "type": "string",
            "pattern": "rss"
          },
          "name": "format",
          "in": "path",
          "description": "L'extension de fichier \"rss\"",
          "required": true
        }
      ]
    },
    "/discipline/{discipline}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/discipline"
        }
      ],
      "get": {
        "summary": "Get by discipline",
        "responses": {
          "200": {
            "$ref": "#/components/responses/AcquisitionsListResponse"
          },
          "400": {
            "$ref": "#/components/responses/RequestValidationError"
          },
          "500": {
            "$ref": "#/components/responses/InternalErrorResponse"
          }
        },
        "operationId": "getByDisciplineOld",
        "deprecated": true,
        "parameters": [
          {
            "$ref": "#/components/parameters/limite"
          },
          {
            "$ref": "#/components/parameters/periode"
          }
        ],
        "description": "**[OBSOLÈTE] Utilisez plutôt `/disciplines/{discipline}`**\n\nRetourne une liste d'acquisitions pour une discipline donnée."
      }
    },
    "/disciplines/{discipline}.{format}": {
      "summary": "Liste les nouvelles acquisitions pour une discipline",
      "get": {
        "parameters": [
          {
            "$ref": "#/components/parameters/limite"
          },
          {
            "$ref": "#/components/parameters/periode"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/AcquisitionsListRSSResponse"
          },
          "400": {
            "$ref": "#/components/responses/RequestValidationError"
          },
          "500": {
            "$ref": "#/components/responses/InternalErrorResponse"
          }
        },
        "summary": "Get RSS feed by discipline",
        "description": "Retourne une liste d'acquisitions pour une discipline donnée.",
        "operationId": "getByDisciplineRSS"
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/discipline"
        },
        {
          "schema": {
            "type": "string",
            "pattern": "rss"
          },
          "name": "format",
          "in": "path",
          "description": "L'extension de fichier \"rss\"",
          "required": true
        }
      ]
    },
    "/disciplines/{discipline}": {
      "summary": "Liste les nouvelles acquisitions pour une discipline",
      "get": {
        "parameters": [
          {
            "$ref": "#/components/parameters/limite"
          },
          {
            "$ref": "#/components/parameters/periode"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/AcquisitionsListResponse"
          },
          "400": {
            "$ref": "#/components/responses/RequestValidationError"
          },
          "500": {
            "$ref": "#/components/responses/InternalErrorResponse"
          }
        },
        "summary": "Get by discipline",
        "description": "Retourne une liste d'acquisitions pour une discipline donnée.",
        "operationId": "getByDiscipline"
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/discipline"
        }
      ]
    },
    "/icons/{icon}.png": {
      "parameters": [
        {
          "$ref": "#/components/parameters/icon"
        }
      ],
      "get": {
        "summary": "Icône",
        "tags": [],
        "responses": {
          "200": {
            "$ref": "#/components/responses/ImageFileResponse"
          },
          "404": {
            "$ref": "#/components/responses/RequestValidationError"
          }
        },
        "operationId": "getIcon",
        "description": "Retourne un fichier icône au format png."
      }
    },
    "/liste/disciplines": {
      "get": {
        "summary": "Get disciplines list",
        "operationId": "getListeDisciplines",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/disciplinesMap"
                },
                "examples": {
                  "Example 1": {
                    "value": {
                      "keys": [
                        {
                          "key": "amenagement",
                          "label": "Aménagement"
                        },
                        {
                          "key": "anthropologie-demographie-sociologie",
                          "label": "Anthropologie, démographie, sociologie"
                        },
                        {
                          "key": "art-cinema-musique",
                          "label": "Art, cinéma, musique"
                        },
                        {
                          "key": "communication-sciences-information",
                          "label": "Communication, sciences de l'information"
                        },
                        {
                          "key": "criminologie-psychologie-travail-social",
                          "label": "Criminologie, psychologie, travail social"
                        },
                        {
                          "key": "droit",
                          "label": "Droit"
                        },
                        {
                          "key": "economie-politique-relations-industrielles",
                          "label": "Économie, politique, relations industrielles"
                        },
                        {
                          "key": "education-psychoeducation",
                          "label": "Éducation, psychoéducation"
                        },
                        {
                          "key": "etudes-religieuses-histoire-philosophie",
                          "label": "Études religieuses, histoire, philosophie"
                        },
                        {
                          "key": "informatique-mathematique-sciences-nature",
                          "label": "Informatique, mathématiques, sciences de la nature"
                        },
                        {
                          "key": "langues-litteratures",
                          "label": "Langues et littératures"
                        },
                        {
                          "key": "sciences-sante",
                          "label": "Sciences de la santé"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalErrorResponse"
          }
        },
        "description": "Retourne la liste des codes de disciplines"
      },
      "parameters": []
    }
  },
  "components": {
    "schemas": {
      "acquisition": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "titre": {
            "type": "string"
          },
          "auteurs": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "href": {
            "type": "string"
          },
          "disciplines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/codeDiscipline"
            }
          },
          "categorielivraison": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "editeur": {
            "type": "string"
          },
          "cotes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "format": {
            "type": "string"
          },
          "isbns": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "image": {
            "type": "string"
          },
          "datenouveaute": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "datenouveaute"
        ]
      },
      "acquisitionsList": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/acquisition"
        },
        "title": "Une liste d'acquisitions",
        "description": "Une liste d'acquisitions",
        "x-stoplight": {
          "id": "43fa112ecdcb9"
        }
      },
      "discipline": {
        "title": "Une discipline",
        "description": "Une discipline",
        "required": [
          "key",
          "label"
        ],
        "type": "object",
        "properties": {
          "key": {
            "$ref": "#/components/schemas/codeDiscipline"
          },
          "label": {
            "type": "string"
          }
        },
        "example": {
          "key": "amenagement",
          "label": "Aménagement"
        }
      },
      "codeDiscipline": {
        "type": "string",
        "example": "amenagement",
        "pattern": "^[a-z-]+",
        "enum": [
          "amenagement",
          "anthropologie-demographie-sociologie",
          "art-cinema-musique",
          "communication-sciences-information",
          "criminologie-psychologie-travail-social",
          "droit",
          "economie-politique-relations-industrielles",
          "education-psychoeducation",
          "etudes-religieuses-histoire-philosophie",
          "informatique-mathematique-sciences-nature",
          "langues-litteratures",
          "sciences-sante"
        ],
        "description": "Un code de discipline",
        "title": "codeDiscipline",
        "x-stoplight": {
          "id": "1cd758e39a58c"
        }
      },
      "disciplinesMap": {
        "type": "object",
        "description": "Un objet contenant une liste de codes de disciplines.",
        "additionalProperties": false,
        "minProperties": 1,
        "maxProperties": 1,
        "properties": {
          "keys": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/discipline"
            }
          }
        },
        "required": [
          "keys"
        ],
        "x-stoplight": {
          "id": "5c5a71e5535b7"
        }
      },
      "RSSType": {
        "title": "RSSType",
        "x-stoplight": {
          "id": "khh8ox6apneag"
        },
        "type": "string",
        "description": "RSS markup",
        "x-examples": {
          "RSS Feed": "string"
        }
      },
      "HttpStatusCode": {
        "title": "HttpStatusCode",
        "x-stoplight": {
          "id": "58d6f80a0c6d4"
        },
        "type": "integer",
        "example": 200,
        "description": ""
      }
    },
    "responses": {
      "AcquisitionsListResponse": {
        "description": "Une liste de nouvelles acquisitions",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/acquisitionsList"
            },
            "examples": {
              "Example 1": {
                "value": [
                  {
                    "id": "1341844661",
                    "titre": "Handbook of coriander (Coriandrum sativum) : chemistry, functionality, and applications / edited by Mohamed Fawzy Ramadan",
                    "auteurs": [
                      "Mohamed Fawzy Ramadan"
                    ],
                    "url": "https://umontreal.on.worldcat.org/oclc/1341844661",
                    "categorielivraison": "en_ligne",
                    "type": "livre",
                    "editeur": "Boca Raton CRC Press",
                    "cotes": [
                      "SB351.C69"
                    ],
                    "disciplines": [
                      "amenagement"
                    ],
                    "format": "1 online resource",
                    "isbns": [
                      "9781003204626",
                      "1003204627"
                    ],
                    "image": "https://syndetics.com/index.aspx?isbn=9781003204626/SC.JPG",
                    "datenouveaute": "2023-01-09T00:00:00.000Z",
                    "datederniermiseajour": "2023-01-09T10:30:37.685Z"
                  }
                ]
              }
            }
          }
        }
      },
      "AcquisitionsListRSSResponse": {
        "description": "Un fil RSS de nouvelles acquisitions",
        "content": {
          "application/rss+xml": {
            "schema": {
              "$ref": "#/components/schemas/RSSType"
            }
          }
        }
      },
      "RequestValidationError": {
        "description": "A response that documents a request error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "errors.json#/components/schemas/RequestError"
            }
          }
        },
        "headers": {}
      },
      "InternalErrorResponse": {
        "description": "Example response",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "errors.json#/components/schemas/InternalError"
            }
          }
        }
      },
      "ImageFileResponse": {
        "description": "",
        "content": {
          "image/png": {
            "schema": {
              "type": "string",
              "format": "binary"
            }
          }
        },
        "headers": {}
      }
    },
    "parameters": {
      "limite": {
        "name": "limite",
        "in": "query",
        "required": false,
        "schema": {
          "type": "integer",
          "maximum": 5000,
          "default": 1000,
          "example": 10,
          "minimum": 0
        },
        "description": "Nombre maximum d'items à retourner"
      },
      "periode": {
        "name": "periode",
        "in": "query",
        "required": false,
        "schema": {
          "type": "integer",
          "default": 7,
          "maximum": 30,
          "example": 10,
          "minimum": 1
        },
        "description": "La période en jours"
      },
      "discipline": {
        "name": "discipline",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string",
          "pattern": "^[a-z-]+",
          "enum": [
            "amenagement",
            "anthropologie-demographie-sociologie",
            "art-cinema-musique",
            "communication-sciences-information",
            "criminologie-psychologie-travail-social",
            "droit",
            "economie-politique-relations-industrielles",
            "education-psychoeducation",
            "etudes-religieuses-histoire-philosophie",
            "informatique-mathematique-sciences-nature",
            "langues-litteratures",
            "sciences-sante"
          ],
          "example": "langues-litteratures"
        },
        "description": "Le code de discipline"
      },
      "disciplines": {
        "name": "disciplines",
        "in": "query",
        "required": false,
        "schema": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "enum": [
            "amenagement",
            "anthropologie-demographie-sociologie",
            "art-cinema-musique",
            "communication-sciences-information",
            "criminologie-psychologie-travail-social",
            "droit",
            "economie-politique-relations-industrielles",
            "education-psychoeducation",
            "etudes-religieuses-histoire-philosophie",
            "informatique-mathematique-sciences-nature",
            "langues-litteratures",
            "sciences-sante"
          ],
          "example": "education-psychoeducation"
        },
        "explode": true,
        "description": "Code de discipline",
        "style": "form"
      },
      "icon": {
        "name": "icon",
        "in": "path",
        "schema": {
          "type": "string",
          "enum": [
            "book",
            "file-movie",
            "file-musical-score",
            "file-picture",
            "file-sound",
            "file-text",
            "newspaper"
          ]
        },
        "required": true
      }
    },
    "securitySchemes": {}
  }
}